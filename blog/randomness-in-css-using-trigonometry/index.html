<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Randomness in CSS using trigonometry</title>
		<meta name="description" content="Explore brand new technique to generate random numbers with plain CSS using new trigonometry functions!">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Hypersphere">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="Hypersphere">

		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Assistant&display=swap" rel="stylesheet">

		

		<meta property="og:title" content="Randomness in CSS using trigonometry"/>
		<meta property="og:url" content="https://hypersphere.blog/blog/randomness-in-css-using-trigonometry/" />
		<meta property="og:description" content="Explore brand new technique to generate random numbers with plain CSS using new trigonometry functions!" />
		<meta property="og:image" content="https://hypersphere.blog/blog/randomness/cover.jpg" />
		<meta property="og:type" content="article" />

		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@kulak_at" />
		<meta name="twitter:creator" content="@kulak_at" />
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-5D5F7SM8E8"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-5D5F7SM8E8');
		</script>
		
		
		<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
* { box-sizing: border-box; }
*, *::before, *::after{
    box-sizing: border-box; /* Set the sizing of an element to include it's border */
}

*{
    margin: 0; /* Set the default margin to 0 */
    padding: 0; /* Set the default padding to 0 */
}

ul[role='list'], ol[role='list']{
    list-style: none; /* Turn off numbered and unordered list decoration */
}

html:focus-within{
    scroll-behavior: smooth; /* Make the scrolling inside of any scrollable element smooth */
}
/* 
a:not([class]){
    text-decoration-skip-ink: auto;
} */

img, picture, svg, video, canvas{
    max-width: 100%; /* Makes it responsive */
    height: auto; /* Makes it responsive */
    vertical-align: middle; /* Makes text next to inline images look better */
    font-style: italic; /* If the images don't load it makes the alt decription look better */
    background-repeat: no-repeat; 
    /* The background repeat and size are there if you want to load a picture first like a backroung image that is worse quality while the better quality image loads */
    background-size: cover;
}

input, button, textarea, select{
    font: inherit; /* Makes these elements inherit fonts */
}

/* Turns off animation for people who don't want to see them */
@media (prefers-reduced-motion: reduce){
    html:focus-within {
        scroll-behavior: auto;
    }
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
        transition: none;
    }
}

body, html{
    height: 100%; /* Makes the body element full screen */
    scroll-behavior: smooth; /* Makes normal scrolling smooth */
}
/* @link https://utopia.fyi/type/calculator?c=320,18,1.2,1240,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

:root {
    --step--2: clamp(0.7813rem, 0.7747rem + 0.0326vw, 0.8rem);
    --step--1: clamp(0.9375rem, 0.9158rem + 0.1087vw, 1rem);
    --step-0: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
    --step-1: clamp(1.35rem, 1.2761rem + 0.3696vw, 1.5625rem);
    --step-2: clamp(1.62rem, 1.5041rem + 0.5793vw, 1.9531rem);
    --step-3: clamp(1.9438rem, 1.7707rem + 0.8652vw, 2.4413rem);
    --step-4: clamp(2.3325rem, 2.0823rem + 1.2511vw, 3.0519rem);
    --step-5: clamp(2.7994rem, 2.4461rem + 1.7663vw, 3.815rem);
  }


/* @link https://utopia.fyi/space/calculator?c=320,18,1.2,1240,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

:root {
    --space-3xs: clamp(0.3125rem, 0.3125rem + 0vw, 0.3125rem);
    --space-2xs: clamp(0.5625rem, 0.5408rem + 0.1087vw, 0.625rem);
    --space-xs: clamp(0.875rem, 0.8533rem + 0.1087vw, 0.9375rem);
    --space-s: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
    --space-m: clamp(1.6875rem, 1.6223rem + 0.3261vw, 1.875rem);
    --space-l: clamp(2.25rem, 2.163rem + 0.4348vw, 2.5rem);
    --space-xl: clamp(3.375rem, 3.2446rem + 0.6522vw, 3.75rem);
    --space-2xl: clamp(4.5rem, 4.3261rem + 0.8696vw, 5rem);
    --space-3xl: clamp(6.75rem, 6.4891rem + 1.3043vw, 7.5rem);
  
    /* One-up pairs */
    --space-3xs-2xs: clamp(0.3125rem, 0.2038rem + 0.5435vw, 0.625rem);
    --space-2xs-xs: clamp(0.5625rem, 0.4321rem + 0.6522vw, 0.9375rem);
    --space-xs-s: clamp(0.875rem, 0.7446rem + 0.6522vw, 1.25rem);
    --space-s-m: clamp(1.125rem, 0.8641rem + 1.3043vw, 1.875rem);
    --space-m-l: clamp(1.6875rem, 1.4049rem + 1.413vw, 2.5rem);
    --space-l-xl: clamp(2.25rem, 1.7283rem + 2.6087vw, 3.75rem);
    --space-xl-2xl: clamp(3.375rem, 2.8098rem + 2.8261vw, 5rem);
    --space-2xl-3xl: clamp(4.5rem, 3.4565rem + 5.2174vw, 7.5rem);
  
    /* Custom pairs */
    --space-s-l: clamp(1.125rem, 0.6467rem + 2.3913vw, 2.5rem);
  }

/* @link https://utopia.fyi/grid/calculator?c=320,18,1.2,1240,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,xl,2xl,12 */

:root {
    --grid-max-width: 108.75rem;
    --grid-gutter: var(--space-s-xl, clamp(1.125rem, 0.5335rem + 2.9577vw, 3.75rem));
    --grid-columns: 12;
  }

:root {
  --main-color-dark: #13293D;
  --main-color-light: #A0C5E3;
  --accent-color-dark: #16324f;
  --accent-color-light: #4E9AD0;
  /* brand variables */
  --font-color: var(--main-color-light);
  --font-color-reversed: var(--main-color-dark);
  --background-color: var(--main-color-dark);
  --background-color-reversed: var(--main-color-light);
  --display-font-family: 'Alumni Sans';
}

@media (prefers-color-scheme: light) {
  :root {
    --font-color: var(--main-color-dark);
    --font-color-reversed: var(--main-color-light);
    --background-color: var(--main-color-light);
    --background-color-reversed: var(--main-color-dark);

  }
}

  
  .u-container {
    max-width: var(--grid-max-width);
    padding-inline: var(--grid-gutter);
    margin-inline: auto;
  }
  
  .u-grid {
    display: grid;
    gap: var(--grid-gutter);
    grid-template-columns: repeat(var(--grid-columns), 1fr);
  }

  body {
    background: var(--background-color);
  }

  a {
    color: inherit;
  }

/* Fonts */

h1, h2, h3, h4, h5 {
  font-family: var(--display-font-family);
  font-weight: bold;
  font-style: italic;
}

body {
  color: var(--font-color);
  font-family: Assistant;
}

h1 {
    font-size: var(--step-5);
}

h2 {
    font-size: var(--step-4);
    line-height: 1em;
}

h3 {
    font-size: var(--step-3);
    line-height: 1em;
    margin-top: 0.8em;
}

body {
    font-size: var(--step-0);
}

p {
    font-size: var(--step-0);
    padding: var(--space-m) 0;
}


.postlist-grid-container {
	container-type: inline-size;
}


.postlist-grid {
    --rows: 4;
    display: grid;
    gap: var(--space-m);
    grid-template-columns: repeat(var(--rows), 1fr);
}

.postlist-item {
    /* background: var(--background-color-reversed);
    color: var(--font-color-reversed); */
    border: 1px solid var(--background-color-reversed);
    border-width: 0 0 1px 0px;
    /* border-bottom-width: 1px; */
    padding: var(--space-s);
    padding-bottom: var(--space-m);
    &:hover {
      border-bottom-width: var(--space-m);
      padding-bottom: 1px;
      background: rgba(255, 255, 255, 0.01);
    }
    a {
      text-decoration: none;
    }

    h2 {
      margin: var(--space-m) 0;
    }
}

@container (max-width: 40rem) {
    .postlist-grid {
      --rows: 1;
    }
}

@container (min-width: 40rem) and (max-width: 60rem) {
    .postlist-grid {
      --rows: 2;
    }
}

@container (min-width: 60rem) and (max-width: 80rem) {
  .postlist-grid {
    --rows: 3;
  }
}

.header {
  display: flex;
  gap: var(--space-s);
  align-items: center;
  margin: var(--space-m) auto var(--space-m) auto;

  justify-content: space-between;
}

.nav {
  display: flex;
  gap: var(--space-s);
  text-transform: uppercase;
  a {
    text-decoration: none;
    padding: var(--space-2xs);
    font-family: var(--display-font-family);
    font-size: var(--step-1);
    &:hover {
      background: var(--background-color-reversed);
      color: var(--font-color-reversed);
    }
  }
}

.post-metadata {
  display: flex;
  gap: var(--space-s);
  margin: var(--space-m) 0;
  a {
    display: inline-block;
    text-decoration: none;
    padding: var(--space-3xs);
    background: var(--accent-color-light);
    color: var(--main-color-dark);
    font-family: var(--display-font-family);
    font-weight: bold;
    text-transform: uppercase;
  }
}

.post-image {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
}

.post-image.draft {
  position: relative;
  overflow: hidden;
}

.post-image.draft::before {
  content: '';
  display: block;
  position: absolute;
  top: 0; right: 0;
  width: 100%;
  background: red;
  color: #FFF;
  padding: 1em 5em;
  transform: translate(30%, 50%) rotate(45deg);
}


.post-description {
  display: flex;
  flex-direction: column;
  p {
    margin-top: auto;
  }
}


.article img {
  display: inline-block;
  margin: var(--space-s) auto;
}

.content {
  padding-bottom: var(--space-xl);
}



pre {
	width: calc(min(80ch, 80%));
  margin: 0 auto !important;
  display: flex;
  border-bottom: 5px solid rgb(23, 23, 23);
  border-radius: 0 !important;
  font-size: var(--step--1) !important;
}

.cover {
  display: flex;
  justify-content: center;
}







/* Direct Links / Markdown Headers */
.header-anchor {
	text-decoration: none;
	font-style: normal;
	font-size: 1em;
	margin-left: .1em;
}
a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
	text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
	color: inherit;
}


/* PREV NEXT */
.links-nextprev {
  display: grid;
  grid-template-areas: "prev next";
  grid-template-columns: 1fr 1fr;
  gap: 1em;
  padding: 2em 0;
}

.links-nextprev .link-prev {
  grid-area: 'prev';
}

.links-nextprev .link-next {
  grid-area: 'next';
  text-align: right;
}

footer {
  background: rgba(0, 0, 0, 0.6);
  color: #DDD;
  padding: 3em 0 6em 0;
}



body {
  display: flex;
  flex-direction: column;
}

body > footer {
  margin-top: auto;
}


.article-link {
  display: flex;
  text-decoration: none;
  background: rgba(0,0,0,0.5);
  width: calc(min(80ch, 100%));
  margin: 0.5em auto;
  padding: 1em;
  align-items: center;
}

.article-link img {
  flex: 1;
  width: 35%;
  height: 100%;
}

.article-link .details {
  flex: 4;
  margin-left: 1em;
}

.link-title {
  font-weight: bold;
  font-size: var(--step-1);
}

.article-link p {
  font-size: var(--step--1) !important;
}

.article img {
  display: block;
  margin: 1em auto;
  max-width: 100%;
}

.link-url {
  font-size: var(--step--2) !important;
  text-align: right;
}


/* codepen */
.cp_embed_wrapper {
  width: calc(min(80ch, 100%));
  margin: 0 auto;
}

.player {
  margin: 1em auto;
}
/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}</style>
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>
<div class="header-container">
		<header class="header u-container">
			<a href="/" class="home-link" alt="Hypersphere">
				<img src="/hypersphere_logo.svg" style="width: 200px; height: 48px;" />
			</a>
			<nav>
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<ul class="nav" role="list">
					<li class="nav-item"><a href="/">Articles</a></li>
					<li class="nav-item"><a href="/projects/">Projects</a></li>
				</ul>
			</nav>
		</header>
</div>

		<main id="skip">
			

<section class="article u-container">

<div class="cover full-bleed">
	<picture><source type="image/webp" srcset="/img/KtX0AbTI82-2560.webp 2560w"><img alt="Article Cover" loading="lazy" decoding="async" style="aspect-ratio: 1.7777777777777777" width="2560" height="1440" src="/img/KtX0AbTI82-2560.jpeg"></picture>
</div>
<div class="article-headings">
	<h1>Randomness in CSS using trigonometry</h1>
	<time class="article-time" datetime="2023-07-31">31 July 2023</time>
	<ul class="post-metadata" role="list">
	<li><a href="/tags/css/" class="post-tag">CSS</a> </li>
	<li><a href="/tags/randomness/" class="post-tag">Randomness</a> </li>
	<li><a href="/tags/trigonometry/" class="post-tag">Trigonometry</a></li>
</ul>
</div>

<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<p>In the past, <a href="https://medium.com/hypersphere-codes/randomness-in-css-b55a0845c8dd">I have covered the topic of pseudo-randomness in CSS using modulo operation</a> and I <a href="https://medium.com/hypersphere-codes/counting-in-css-unlock-magic-of-css-variables-8e610881097a">used prime numbers to create an automatic counter that can be used to generate different values for each object</a>. Thanks to that, we could compute pseudo-random values for each element independently.</p>
<p>As robust as this solution is, it has few downsides:</p>
<ul>
<li>The modulo function is not continuous</li>
<li>It is overly complex: requires 3 variables and <code>@property</code> definition for each random value we want to generate</li>
<li>Requires using <code>@property</code> which is not widely supported yet</li>
</ul>
<p>Fortunately, we can do better! In this article, I would like to propose a better solution using trigonometry.</p>
<h2 id="better-approach" tabindex="-1">Better approach <a class="header-anchor" href="#better-approach">#</a></h2>
<p>Since the last time I explored this topic, new amazing features arrived in CSS. One of the most exciting additions is the trigonometric functions. They unlock a lot of previously impossible tasks. They are also the first bounded continuous functions natively supported in CSS, making them an amazing tool for creating pseudo-random generators.</p>
<h3 id="randomness-vs-pseudo-randomness" tabindex="-1">Randomness vs pseudo-randomness <a class="header-anchor" href="#randomness-vs-pseudo-randomness">#</a></h3>
<p>Obviously the solution presented here generates pseudo-random values only. All values are computed using predetermined constants. <a href="https://medium.com/hypersphere-codes/randomness-in-css-b55a0845c8dd">As described in my previous article</a>, we can add an additional <code>--seed</code> variable and change it from the outside of the system (set it in JavaScript on load for example) to provide less deterministic outcome, but CSS does not provide any non-deterministic methods to work with. That said, the solution should be enough to get sufficient pseudo-random values for animations, positions, etc. If you want to use it to solve your cryptographic functions, you might be not using proper technology to begin with 😉</p>
<h2 id="characteristics-of-a-sine-function" tabindex="-1">Characteristics of a sine function <a class="header-anchor" href="#characteristics-of-a-sine-function">#</a></h2>
<p>Sine and cosine functions are interesting for many reasons. They can be very useful in all sorts of operations where circles and rotations are involved. In our case though, we can use their properties for other purposes.</p>
<h3 id="bounded-function" tabindex="-1">Bounded function <a class="header-anchor" href="#bounded-function">#</a></h3>
<p>One of the great properties of sine and cosine is that the resulting values are always bounded between -1 and 1. It means, no matter how big or small the value you pass to it, the result will always be a value from this range. Then, we can perform simple normalisation to the range <code>[0,1]</code>. Having normalised values, we can use it to represent any value using simple linear mapping.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token property">--x</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> * 342.06184 + 23.434<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Then we can use it as following */</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>50 + <span class="token function">var</span><span class="token punctuation">(</span>--x<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
/* Red will be in the range of 50-150.</code></pre>
<p>The code above uses our counter <code>var(--n)</code> introduced in my past article where I use prime numbers to create an effective way to automatically create a counter variable in CSS.</p>
<a class="article-link" href="https://medium.com/hypersphere-codes/counting-in-css-unlock-magic-of-css-variables-8e610881097a">
    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASL8jncpPqtsOV-BVqxHnQ.png" />
    <div class="details">
        <div class="link-title">Counting in CSS: Unlock magic of CSS variables</div>
        <p>Use prime numbers to create generic counters in CSS that you can use for all sorts of stuff.</p>
        <div class="link-url">medium.com</div>
    </div>
</a>
<p>The value is then multiplied and offset by some arbitrary values to provide a pseudo-random big number (the values do not really matter, you can change them as you wish to get different results). After that, we use the sine function to map it to the range <code>[-1, 1]</code>. Lastly, as shown in the animation below, we can map it to the range <code>[0, 1]</code> by applying a simple algebraic transformation. Once we obtain value from the range <code>[0, 1]</code>, we can use linear mapping to map it to any other desired value.</p>
<img src="/blog/randomness/scaling.gif" alt="Visualisation of Scaling" class="full-bleed" />
<h3 id="continuity" tabindex="-1">Continuity <a class="header-anchor" href="#continuity">#</a></h3>
<p>Another characteristic of the sine function is continuity. You can <a href="https://en.wikipedia.org/wiki/Continuous_function">explore the full formal definition of continuity here</a>, but to make things simple you can think of it that the small changes in the input for sine or cosine function will end up in small changes to the output. Thanks to that we can achieve a gradual change in values when animating while still having the system behave randomly.</p>
<img src="/blog/randomness/continuity.gif" alt="Visualisation of Continuity" class="full-bleed" />
<h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples">#</a></h2>
<p>Here are a few examples demonstrating the potential of using trigonometric functions to generate pseudo-random values.</p>
<h3 id="circles-grid" tabindex="-1">Circles Grid <a class="header-anchor" href="#circles-grid">#</a></h3>
<p>The first example shows sine properties in action. The generated values are random but we can still maintain order and feeling of continuity when it comes to both colour and size animation.</p>
<p class="codepen" data-height="600" data-default-tab="result" data-slug-hash="QWJBOgG" data-user="hypersphere" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/hypersphere/pen/QWJBOgG">
  Randomness in CSS using Trigonomentry</a> by hypersphere (<a href="https://codepen.io/hypersphere">@hypersphere</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<p>They key part of the code is computation of x, y, z and w variables which are used to represent red, green, blue and width respectively.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">div::before</span> <span class="token punctuation">{</span>
  <span class="token property">--x</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span>4.284 * <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--y</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span>7.284 * <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--z</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span>4 * <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> + 2 * <span class="token function">var</span><span class="token punctuation">(</span>--t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--w</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>0.2 * <span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--t<span class="token punctuation">)</span>/100<span class="token punctuation">)</span> + 0.8<span class="token punctuation">)</span> * 49.123 * <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>
    <span class="token function">calc</span><span class="token punctuation">(</span>50 +  100 * <span class="token function">var</span><span class="token punctuation">(</span>--x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">calc</span><span class="token punctuation">(</span>200 + 30 * <span class="token function">var</span><span class="token punctuation">(</span>--y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">calc</span><span class="token punctuation">(</span>120 + 100 * <span class="token function">var</span><span class="token punctuation">(</span>--z<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% + <span class="token function">var</span><span class="token punctuation">(</span>--w<span class="token punctuation">)</span>*50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>The last 2 variables, in addition to our counter <code>--n</code>, use time variable <code>--t</code> which is obtained by running animation that is changing gradually the variable:</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token atrule"><span class="token rule">@property</span> --t</span> <span class="token punctuation">{</span>
  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">'&lt;number>'</span><span class="token punctuation">;</span> <span class="token comment">/* &lt;- defined as type number for the transition to work */</span>
  <span class="token property">initial-value</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">inherits</span><span class="token punctuation">:</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--t</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> timeOn</span> <span class="token punctuation">{</span>
  <span class="token selector">50%</span> <span class="token punctuation">{</span><span class="token property">--t</span><span class="token punctuation">:</span> 30<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 30s timeOn infinite linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>This is the only part of the code that uses <code>@property</code>. To make it work in all browsers, we could just simply update this variable in JavaScript without losing the ability to compute everything else in plain CSS.</p>
<h3 id="blobs" tabindex="-1">Blobs <a class="header-anchor" href="#blobs">#</a></h3>
<p>Randomness can be also used with SVG elements making it a powerful tool when combined with SVG Filters. The demo below was inspired by an <a href="https://css-tricks.com/gooey-effect/">amazing CSS-Tricks article The Gooey Effect</a>.</p>
<p class="codepen" data-height="629.1723022460938" data-default-tab="result" data-slug-hash="oNQPYWW" data-user="hypersphere" style="height: 629.1723022460938px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/hypersphere/pen/oNQPYWW">
  Randomness in CSS with Trigonometry using SVG circles</a> by hypersphere (<a href="https://codepen.io/hypersphere">@hypersphere</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<p>Position of each individual blobs is determined using simple formula. The only difference is that we use cx, cy, r and fill to style them as they are SVG elements.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">.blobs > circle</span> <span class="token punctuation">{</span>
  <span class="token property">--x</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--t<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> * 74.543 + 432.43312<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--y</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--t<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> * 2.34 + 1.432<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--v</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>0.5 + 0.5 * <span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--n<span class="token punctuation">)</span> * 4.343 + 2.673<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token property">cx</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>10vw + <span class="token function">var</span><span class="token punctuation">(</span>--x<span class="token punctuation">)</span> * 80vw<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">cy</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>10vh + <span class="token function">var</span><span class="token punctuation">(</span>--y<span class="token punctuation">)</span> * 80vh<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">r</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--v<span class="token punctuation">)</span> * 5vw + 1vw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>To achieve the gooey effect, we use the following SVG filter:</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feGaussianBlur</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SourceGraphic<span class="token punctuation">"</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blur<span class="token punctuation">"</span></span> <span class="token attr-name">stdDeviation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blur<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>matrix<span class="token punctuation">"</span></span> <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 22 -11<span class="token punctuation">"</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goo<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goo<span class="token punctuation">"</span></span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SourceGraphic<span class="token punctuation">"</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mix<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span></code></pre>
<h3 id="memphis-pattern" tabindex="-1">Memphis Pattern <a class="header-anchor" href="#memphis-pattern">#</a></h3>
<p>The last demo is an <a href="https://medium.com/hypersphere-codes/randomness-in-css-b55a0845c8dd">updated version of the example I used in my previous attempt for achieving randomness in CSS</a> where I used the modulo operator. With the new solution, calculations are much easier to understand and modify.</p>
<p class="codepen" data-height="589.572509765625" data-default-tab="result" data-slug-hash="yLQqGYj" data-user="hypersphere" style="height: 589.572509765625px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/hypersphere/pen/yLQqGYj">
  Memphis Pattern using Trigonometry randomness</a> by hypersphere (<a href="https://codepen.io/hypersphere">@hypersphere</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<hr>
<p>This article is also <a href="https://medium.com/hypersphere-codes/randomness-in-css-with-trigonometry-functions-fac71c89cd23">available on my Medium Blog</a>. If you enjoy it, consider heading there and following me for more content.</p>

<ul class="links-nextprev" role="list"><li class="link-prev">Previous: <a href="/blog/gameboy-like-app-in-13k/">How I created a GameBoy-like game in 13kb</a></li><li class="link-next">Next: <a href="/blog/typeguards-to-use-or-not/">TypeScript Typeguards: To use or not to use?</a></li>
</ul>

</section>
		</main>

		<footer>
			<section class="u-container">
				By Hypersphere. 2024.
			</section>
		</footer>

		<!-- Current page: /blog/randomness-in-css-using-trigonometry/ -->
	</body>
</html>
